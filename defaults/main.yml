---

nginx_user: "www-data"
nginx_group: "www-data"
nginx_worker_connections: 1024
nginx_worker_processes: "{{ ansible_processor_count }}"
nginx_pid: "/var/run/nginx.pid"
nginx_www_dir: "/var/www"

nginx_use_realpath_root: no
nginx_php_force_cgi_redirect: no
nginx_set_default_server: yes

nginx_add_headers:
  - 'Strict-Transport-Security "max-age=63072000 includeSubDomains preload"  always'
  - X-Content-Type-Options nosniff  always
  - X-Frame-Options DENY  always

nginx_dhparam_bits: 4096

nginx_http_params_default:
  server_names_hash_bucket_size: 64
  server_tokens: off

  sendfile: on
  tcp_nopush: on
  tcp_nodelay: on

  gzip: on
  gzip_disable: "msie6"
  gzip_min_length: 256
  gzip_types: application/json application/vnd.ms-fontobject application/x-font-ttf application/x-javascript application/xml application/xml+rss font/opentype image/svg+xml image/x-icon text/css text/javascript text/plain text/xml

  ssl_ciphers: '"EECDH+AESGCM:EDH+AESGCM:AES256+EECDH:AES256+EDH"'
  ssl_dhparam: "/etc/nginx/dh{{ nginx_dhparam_bits }}.pem"
  ssl_ecdh_curve: secp384r1
  ssl_prefer_server_ciphers: on
  ssl_protocols: TLSv1.2
  ssl_session_cache: shared:SSL:10m
  ssl_session_tickets: off
  ssl_stapling: on
  ssl_stapling_verify: on
  resolver: "{{ ansible_dns.nameservers|join(' ') }} valid=300s"
  resolver_timeout: 5s
  add_header: "{{ nginx_add_headers }}"

nginx_http_params: {}

nginx_server_templates: []
